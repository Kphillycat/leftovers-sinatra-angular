<form>
  <input ng-model="query"></input>
</form>
<table>
  <tr>
    <th>Restaurant Name</th>
    <th>Address</th>
    <th>Food Description</th>
    <th>Quantity (# meals)</th>
    <th>Closing Time</th>
  </tr>
  <tr ng-repeat="pickup in pickups | filter: query">
    <td>{{pickup.restaurant.name}}</td>
    <td>{{pickup.restaurant.address}}</td>
    <td>{{pickup.food_description}}</td>
    <td>{{pickup.meals}}</td>
    <td>{{pickup.closing_time | date:'mediumTime'}}</td>
  </tr>
</table>

<div id="map"></div>


<script type="text/javascript">
  $(function() {
    initialize();   
  })
  
  var map;
  var service;
  var infowindow;
  var lat;
  var lng;

  function initialize() {
    navigator.geolocation.getCurrentPosition(function(position){ lat = position.coords.latitude;
      lng = position.coords.longitude });
    var here = new google.maps.LatLng(parseFloat(lat),parseFloat(lng));

    map = new google.maps.Map(document.getElementById('map'), {
        center: here,
        zoom: 15
      });

    var request = {
      location: here,
      radius: '500',
      types: ['restaurant']
    };

    service = new google.maps.places.PlacesService(map);
    service.nearbySearch(request, callback);
  }

  function callback(results, status) {
    console.log(status);
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      for (var i = 0; i < results.length; i++) {
        var place = results[i];
        console.log(results[i]);
      }
    }
  }
</script>

